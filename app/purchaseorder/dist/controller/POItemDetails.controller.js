sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("sp.fiori.purchaseorder.controller.POItemDetails",{onInit:function(){this.oDataModel=sap.ui.getCore().getModel("oDataModel");this.getView().setModel(this.oDataModel);this.router=sap.ui.core.UIComponent.getRouterFor(this);this.router.attachRouteMatched(this._handleRouteMatched,this);this.itemModel=new sap.ui.model.json.JSONModel;this.getView().setModel(this.itemModel,"itemModel")},_handleRouteMatched:function(e){var t=this;if(e.getParameter("name")!=="POItemDetails"){return}var i=sessionStorage.getItem("unitCode")||"P01";this.Po_Num=e.getParameter("arguments").Po_No;this.Schedule_No=this.Po_Num.replace(/-/g,"/");this.Item_No=e.getParameter("arguments").Item_No;this.Line_Num=e.getParameter("arguments").Line_Num;var o=this.getOwnerComponent().getModel();return new Promise(function(e,r){o.callFunction("/getPurchaseMaterialQuantityList",{method:"GET",urlParameters:{UnitCode:i,PoNum:this.Schedule_No,MaterialCode:this.Item_No,PoLineNum:this.Line_Num},success:function(i,o){t.itemModel.setData(i.results);t.itemModel.refresh(true.results);e()}.bind(this),error:function(e){r(new Error("Failed to fetch material data."))}})}.bind(this))},onNavBack:function(){jQuery.sap.require("sap.ui.core.routing.History");var e=sap.ui.core.routing.History.getInstance(),t=e.getPreviousHash();if(t!==undefined){history.go(-1)}else{var i=true;this.router.navTo("SASplit",{},i)}}})});