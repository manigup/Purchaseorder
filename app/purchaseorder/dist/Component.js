sap.ui.define(["sap/ui/core/UIComponent","sp/fiori/purchaseorder/model/models","sap/m/MessageBox","sap/ui/core/routing/HashChanger","sap/ui/model/odata/ODataModel","sp/fiori/purchaseorder/controller/formatter"],function(e,a,r,t,o){"use strict";return e.extend("sp.fiori.purchaseorder.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);var t=window.location.href.includes("site")?"/":"";var s=jQuery.sap.getModulePath("sp/fiori/purchaseorder");s=s==="."?"":s;var i=s+t+this.getMetadata().getManifestEntry("sap.app").dataSources.mainService.uri;var d=new o(i,true);var n=new sap.ui.model.json.JSONModel({confirmPressFlag:false});this.setModel(n,"flagModel");sap.ui.getCore().setModel(n,"flagModel");d.attachMetadataFailed(e=>{var a=e.getParameter("response").body;if(a.indexOf("<?xml")!==-1){r.error($($.parseXML(a)).find("message").text())}else{r.error(a)}});d.attachMetadataLoaded(()=>{this.setModel(d);sap.ui.getCore().setModel(d,"oDataModel");d.setDefaultCountMode("None")});d.attachRequestFailed(e=>{var a=e.getParameter("responseText");if(a.indexOf("<?xml")!==-1){r.error($($.parseXML(a)).find("message").text())}else{r.error(JSON.parse(a).error.message.value)}});this.setModel(a.createDeviceModel(),"device")}})});